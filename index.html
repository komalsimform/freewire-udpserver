<html>

<head>
    <title>UDP server</title>
</head>

<body>
    <div>
        <h3 style="text-align: center;">Connect UDP server</h3>
    </div>
    <div style="text-align: center;">
        <input type="text" maxlength="12" id="inputValue" placeholder="Enter mac address">
        <button onclick="submitData()">Submit</button>
    </div>
    <br />
    <div style="text-align: center;">
        <button onclick="configuration()">Configuration</button>
    </div>
    <br />
    <div style="text-align: center;">
        <label>Test Mode</label>
        <select onchange="selectMode()" id="select">
            <option value="0">None (Live Control Data)</option>
            <option value="1">RGBW Cycle</option>
            <option value="2">Red</option>
            <option value="3">Green</option>
            <option value="4">Blue</option>
            <option value="5">White</option>
            <option value="6">Set Color</option>
            <option value="7">Color Fade</option>
            <option value="8">Single Pixel</option>
        </select>
    </div>
    <br />
    <div style="text-align: center;">
        <p id="errormsg" style="color: red;">Please provide valid mac address</p>
        <p id="successmsg" style="color: green;">Mac address stored successfully</p>
        <p id="errorstringlengthmsg" style="color: red;">Please provide 12 characters</p>
    </div>
   
</body>

</html>

<script>
    window.onload = onLoad();
    function onLoad() {
        document.getElementById('errormsg').style.display = 'none';
        document.getElementById('successmsg').style.display = 'none';
        document.getElementById('errorstringlengthmsg').style.display = 'none';
    }
    function submitData() {
        var validCheck = /^[0-9a-fA-F]+$/;
        var inputValue =  document.getElementById('inputValue').value;
        console.log('configuration cl===', document.getElementById('inputValue').value);
        var checkMacAddress = validCheck.test(inputValue);
        console.log('test regex===',checkMacAddress)
        if(inputValue.length >= 12) {
            document.getElementById('errorstringlengthmsg').style.display = 'none';
        if (checkMacAddress) {
            document.getElementById('errormsg').style.display = 'none';
            var http = new XMLHttpRequest();
            console.log('on click cl===', document.getElementById('inputValue').value);
            var inputValue = document.getElementById('inputValue').value;
            var url = 'http://localhost:3000/submitData/' + inputValue;
            var params = inputValue;
            http.open('POST', url, true);

            http.onreadystatechange = function () {//Call a function when the state changes.
                console.log('success submit',http.responseText);
                // var value = JSON.parse(http.responseText)
                    document.getElementById('successmsg').style.display = 'block';
                    document.getElementById('errormsg').style.display = 'none';
            }
            http.send(params);
        } else {
            document.getElementById('errormsg').style.display = 'block';
            document.getElementById('successmsg').style.display = 'none';
        }
        } else {
            document.getElementById('errorstringlengthmsg').style.display = 'block';
        }
    }
    function selectMode() {
        console.log('on change cl===', document.getElementById('select').value);
        var selectedValue = document.getElementById('select').value;
        var http = new XMLHttpRequest();
        var url = 'http://localhost:3000/sendMode/' + selectedValue;
        var params = document.getElementById('select').value;
        http.open('POST', url, true);

        http.onreadystatechange = function () {//Call a function when the state changes.
            console.log('success test mode',http.responseText);
            if(http.responseText === 'true') {
                document.getElementById('successmsg').style.display = 'block';
                document.getElementById('errormsg').style.display = 'none';

            } else {
                document.getElementById('errormsg').style.display = 'block';
                document.getElementById('successmsg').style.display = 'none';
            }
        }
        http.send(params);
    }
    function configuration() {
        var selectedValue = document.getElementById('select').value;
        var http = new XMLHttpRequest();
        var url = 'http://localhost:3000/configuration/';
        var params = 'test';
        http.open('POST', url, true);

        http.onreadystatechange = function () {//Call a function when the state changes.
            console.log('success configuration===',http.responseText);
            if(http.responseText === 'true') {
                document.getElementById('successmsg').style.display = 'block';
                document.getElementById('errormsg').style.display = 'none';

            } else {
                document.getElementById('errormsg').style.display = 'block';
                document.getElementById('successmsg').style.display = 'none';
            }
        }
        http.send(params);
        // if (checkMacAddress) {
        //     document.getElementById('errormsg').style.display = 'none';
        //     // document.getElementById('successmsg').style.display = 'block';
        // } else {
        //     document.getElementById('errormsg').style.display = 'block';
        //     // document.getElementById('successmsg').style.display = 'none';
        // }
        // var selectedValue = document.getElementById('select').value;
        // var http = new XMLHttpRequest();
        // var url = 'http://localhost:3000/sendMode/' + selectedValue;
        // var params = document.getElementById('select').value;
        // http.open('POST', url, true);

        // http.onreadystatechange = function () {//Call a function when the state changes.
        //     console.log('success test mode',http.responseText);
        // }
        // http.send(params);
    }
</script>